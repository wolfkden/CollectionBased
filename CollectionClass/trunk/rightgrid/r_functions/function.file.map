RDA2
A
2
134144
131840
1026
1
9
3
map
1539
1026
1
9
6
source
16
19
9
32
function(func=NULL,\040data=NULL)\040{
9
17
btime<-Sys.time()
9
31
dateExt<-gsub(\"\040\",\040\"-\",\040date())
9
76
func<-if(is.null(func)\040||\040typeof(func)\040!=\040\"closure\")\040function(x)\040x\040else\040func
9
64
funcFile\040<-\040gsub(\"\040\",\040\"\",\040paste(\"function.file.\",\040dateExt,\040\"\"))\040
9
53
save(func,\040file=funcFile,\040compress=FALSE,\040ascii=TRUE)
9
24
funcName<-load(funcFile)
9
54
dataFile\040<-\040gsub(\"\040\",\040\"\",\040paste(\"data_\",\040dateExt,\040\"\"))
9
136
if(is.null(data)\040||\040typeof(data)\040==\040\"double\"\040&&\040length(data)\040==\0401)\040system(paste(\"touch\",\040dataFile,\040\"\040\"))\040else\040write(data,\040file=dataFile)
9
36
jobMapScript\040<-\040\"ruby\040job_mapper.rb\"
9
77
system(paste(\"ruby\040loadFileS3.rb\040--data\",\040dataFile,\040\"--code\",\040funcFile,\040\"\040\"))
9
188
jobMapScript\040<-\040if(typeof(data)\040==\040\"double\"\040&&\040length(data)\040==\0401)\040paste(jobMapScript,\040\"--r_array_size\",\040formatC(data,\040digits=40,\040width=-1),\040\"--r_function\",\040funcName,\040\"\040\")\040else\040jobMapScript
9
12
jobMapScript
9
20
system(jobMapScript)
9
17
etime<-Sys.time()
9
35
system(\"ruby\040aggregate_results.rb\")
9
18
print(etime-btime)
9
62
scan(gsub(\"\040\",\040\"\",\040paste(\"output/\",\040dataFile,\040\"_output\",\040\"\")))
9
1
}
254
253
1026
1
9
4
func
254
1026
1
9
4
data
254
254
6
1
9
1
{
2
6
1
9
2
<-
2
1
9
5
btime
2
6
1
9
8
Sys.time
254
254
2
6
1791
2
1
9
7
dateExt
2
6
1
9
4
gsub
2
16
1
9
1
\040
2
16
1
9
1
-
2
6
1
9
4
date
254
254
254
2
6
1791
2
1023
2
6
1
9
2
if
2
6
1
9
2
||
2
6
1
9
7
is.null
2
1023
254
2
6
1
9
2
!=
2
6
1
9
6
typeof
2
1023
254
2
16
1
9
7
closure
254
254
2
6
1
9
8
function
2
1026
1
9
1
x
251
254
2
4863
2
16
1
9
13
function(x)\040x
254
2
1023
254
254
2
6
1791
2
1
9
8
funcFile
2
6
2815
2
16
1
9
1
\040
2
16
1
9
0

2
6
1
9
5
paste
2
16
1
9
14
function.file.
2
2559
2
16
1
9
0

254
254
254
2
6
1
9
4
save
2
1023
1026
1
9
4
file
5119
1026
1
9
8
compress
10
1
0
1026
1
9
5
ascii
10
1
1
254
2
6
1791
2
1
9
8
funcName
2
6
1
9
4
load
2
5119
254
254
2
6
1791
2
1
9
8
dataFile
2
6
2815
2
16
1
9
1
\040
2
16
1
9
0

2
6
5375
2
16
1
9
5
data_
2
2559
2
16
1
9
0

254
254
254
2
6
3327
2
6
3583
2
6
3839
2
1279
254
2
6
1
9
2
&&
2
6
1
9
2
==
2
6
4351
2
1279
254
2
16
1
9
6
double
254
2
6
7679
2
6
1
9
6
length
2
1279
254
2
14
1
1
254
254
254
2
6
1
9
6
system
2
6
5375
2
16
1
9
5
touch
2
7167
2
16
1
9
1
\040
254
254
2
6
1
9
5
write
2
1279
1026
5887
7167
254
254
2
6
1791
2
1
9
12
jobMapScript
2
16
1
9
18
ruby\040job_mapper.rb
254
2
6
8191
2
6
5375
2
16
1
9
25
ruby\040loadFileS3.rb\040--data
2
7167
2
16
1
9
6
--code
2
5119
2
16
1
9
1
\040
254
254
2
6
1791
2
8703
2
6
3327
2
6
7423
2
6
7679
2
6
4351
2
1279
254
2
16
1
9
6
double
254
2
6
7679
2
6
7935
2
1279
254
2
14
1
1
254
254
2
6
5375
2
8703
2
16
1
9
14
--r_array_size
2
6
1
9
7
formatC
2
1279
1026
1
9
6
digits
14
1
40
1026
1
9
5
width
6
1
9
1
-
2
14
1
1
254
254
2
16
1
9
12
--r_function
2
6655
2
16
1
9
1
\040
254
2
8703
254
254
2
8703
2
6
8191
2
8703
254
2
6
1791
2
1
9
5
etime
2
6
2303
254
254
2
6
8191
2
16
1
9
25
ruby\040aggregate_results.rb
254
2
6
1
9
5
print
2
6
9727
2
9983
2
2047
254
254
2
6
1
9
4
scan
2
6
2815
2
16
1
9
1
\040
2
16
1
9
0

2
6
5375
2
16
1
9
7
output/
2
7167
2
16
1
9
7
_output
2
16
1
9
0

254
254
254
254
254
